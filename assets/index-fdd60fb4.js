import{d as G,r as H,b as y,J as K,i as o,a as m,Q as O,f as A,I as R,g as L,F as I,n as V,t as T,R as X,U as Y,u as S,h as k,s as B,j as P}from"./index-00bf0c33.js";const Z=T('<div><div class="cm-tabs-header-wrap"><div class="cm-tabs-active-line"></div><div class="cm-tabs-scroll"><ul class="cm-tabs-header"></ul></div><div class="cm-tabs-prev"></div><div class="cm-tabs-next"></div></div><div class="cm-tabs-content">'),p=T("<li>"),ee=T("<div>");function ne(a){let x,h,d;const z=()=>P(a,"cm-tabs",{"cm-tabs-card":a.card,"cm-tabs-overflow":s.scroll}),M=G(()=>a.children),E=()=>M.toArray(),[s,i]=H({activeName:"",tabs:[],scroll:!1,scrollLeft:0});y(()=>{i("tabs",E()),Promise.resolve().then(()=>{w()})});const W=()=>{const e=h.getBoundingClientRect().width;let t=s.scrollLeft+e;t=Math.min(0,t),d.style.transform=`translate(${t}px, 0)`,i("scrollLeft",t)},q=()=>{const e=h.getBoundingClientRect().width,t=d.getBoundingClientRect().width;let c=s.scrollLeft-e;const l=e-t;c=Math.max(l,c),d.style.transform=`translate(${c}px, 0)`,i("scrollLeft",c)},D=e=>{i("tabs",X(t=>{t.push(e)})),setTimeout(()=>{w()})},F=e=>{i("activeName",e.name),a.onTabClick&&a.onTabClick(e)},j=(e,t)=>{t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation();const c=s.tabs.filter(l=>l.name!==e);s.activeName===e&&i("activeName",c[c.length-1].name),i("tabs",c),a.onRemove&&a.onRemove(e),w()},J=()=>{const e=s.activeName;let t=0;s.tabs.forEach((l,u)=>{l.name===e&&(t=u)});const c={transform:`translate(${-t*100}%, 0)`};return a.duration!==void 0&&typeof a.duration=="number"&&(c["transition-duration"]=a.duration+"ms"),c};y(()=>{const e=Y(()=>s.activeName);a.activeName&&e!==a.activeName&&i("activeName",a.activeName??"")}),y(()=>{i("tabs",E())}),K(()=>{w()});const w=()=>{const e=h.getBoundingClientRect().width,t=d.getBoundingClientRect().width;t>e&&!s.scroll&&i("scroll",!0),t<e&&s.scroll&&(i("scroll",!1),W())},Q=()=>{if(!a.card){const e=s.activeName;let t=0;s.tabs.forEach((n,f)=>{n.name===e&&(t=f)});const l=d.querySelectorAll(".cm-tabs-header-item")[t];if(!l)return;const u=d.closest(".cm-tabs-header-wrap"),v=l.querySelector(".cm-tabs-close"),C=v?v.getBoundingClientRect().width:0,b=l.getBoundingClientRect(),N=u.getBoundingClientRect(),$=b.left-N.left,g=b.width-C;return x.style.width=`${g}px`,x.style.left=`${$}px`,{width:`${g}px`,left:`${$}px`}}};return a.ref&&a.ref({addTab:D}),(()=>{const e=Z(),t=e.firstChild,c=t.firstChild,l=c.nextSibling,u=l.firstChild,v=l.nextSibling,C=v.nextSibling,b=t.nextSibling,N=x;typeof N=="function"?S(N,c):x=c;const $=h;typeof $=="function"?S($,l):h=l;const g=d;return typeof g=="function"?S(g,u):d=u,o(u,m(I,{get each(){return s.tabs},children:n=>{const f=()=>({"cm-tabs-header-item":!0,"cm-tabs-header-item-active":n.name===s.activeName,"cm-tabs-header-item-disabled":n.disabled});return(()=>{const r=p();return O(r,"click",F.bind(null,n),!0),o(r,()=>n.icon,null),o(r,()=>n.title,null),o(r,m(A,{get when(){return n.closeable},get children(){return m(R,{name:"x",get onClick(){return j.bind(null,n.name)},class:"cm-tabs-close",size:12})}}),null),L(_=>k(r,f(),_)),r})()}})),o(t,m(A,{get when(){return a.extra},get children(){return a.extra}}),v),v.$$click=W,o(v,m(R,{name:"chevron-left",size:14})),C.$$click=q,o(C,m(R,{name:"chevron-right",size:14})),o(b,m(I,{get each(){return s.tabs},children:n=>{const f=()=>P(n,"cm-tab-panel",{"cm-tab-panel-active":n.name===s.activeName});return(()=>{const r=ee();return o(r,()=>n.children),L(_=>k(r,f(),_)),r})()}})),L(n=>{const f=z(),r=a.style,_=Q(),U=J();return n._v$=k(e,f,n._v$),n._v$2=B(e,r,n._v$2),n._v$3=B(c,_,n._v$3),n._v$4=B(b,U,n._v$4),n},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),e})()}V(["click"]);export{ne as T};
