import{c as L,J as E,Q as k,i as c,a as i,f as z,N as f,g as h,O as b,n as T,t as l,u as d,A,h as C,s as R,j as x}from"./index-00bf0c33.js";const H=l('<div class="cm-avatar-hover">'),S=l('<img alt="">'),W=l("<span>"),j=l('<span class="cm-avatar-string">');function B(e){if(e.asProps)return e;const[$,m]=L(!1),g=()=>x(e,"cm-avatar",{[`cm-avatar-${e.size}`]:e.size,"cm-avatar-icon":e.icon,"cm-avatar-img":e.src,"cm-avatar-square":e.shape==="square"});let s,r;E(()=>{if(r&&s){s.style.Transform="",s.style.webkitTransform="",s.style.mozTransform="";const t=r.clientWidth,n=s.getBoundingClientRect().width,u=Math.acos(21/t),M=Math.sin(u)*t,v=n>t?M/n:1;s.style.Transform=`scale(${v})`,s.style.webkitTransform=`scale(${v})`,s.style.mozTransform=`scale(${v})`}});const _=()=>{let t={...e.style};return typeof e.size=="number"&&(t.width=e.size+"px",t.height=e.size+"px"),t},w=t=>{m(!0),e.onMouseEnter&&e.onMouseEnter(t)},y=t=>{m(!1),e.onMouseLeave&&e.onMouseLeave(t)};return(()=>{const t=W();t.addEventListener("mouseleave",y),t.addEventListener("mouseenter",w);const o=r;return typeof o=="function"?d(o,t):r=t,k(t,"click",e.onClick,!0),c(t,i(z,{get when(){return $()},get children(){const n=H();return c(n,()=>e.hoverMask),n}}),null),c(t,i(b,{get fallback(){return(()=>{const n=j(),a=s;return typeof a=="function"?d(a,n):s=n,c(n,()=>e.children),n})()},get children(){return[i(f,{get when(){return e.src},get children(){const n=S();return h(()=>A(n,"src",e.src)),n}}),i(f,{get when(){return e.icon},get children(){return e.icon}})]}}),null),h(n=>{const a=g(),u=_();return n._v$=C(t,a,n._v$),n._v$2=R(t,u,n._v$2),n},{_v$:void 0,_v$2:void 0}),t})()}T(["click"]);export{B as A};
