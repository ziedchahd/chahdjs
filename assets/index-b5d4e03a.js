import{c as S,r as z,b as $,i as h,a as l,F as L,I as j,D as I,g as V,t as v,R as A,U as B,u as E,h as P,s as R,j as U}from"./index-00bf0c33.js";import{C as q}from"./Collapase-7b5e31c6.js";import{O as G}from"./Option-c7b11dbe.js";import{V as H}from"./Value-1107dbb2.js";import{c as J}from"./createField-b596c149.js";const K=v("<div>"),M=v('<div class="cm-select-options"><ul class="cm-select-option-list">'),N=v('<div class="cm-select-options-wrap">');function Z(t){const[u,d]=S(!1),w=t.align??"bottomLeft",[f,b]=J(t,""),F=()=>U(t,"cm-select","cm-autocomplete",{"cm-select-disabled":t.disabled,[`cm-select-${t.size}`]:t.size,"cm-select-clearable":!t.disabled&&t.clearable&&f().length!==0,"cm-select-open":u(),"cm-select-with-prefix":t.prefix});let m;const _="label",r=t.valueField||"value";let c=[];t.data&&(c=t.data.map(e=>typeof e=="object"?(e._show=!0,e):{[r]:e,label:e,_show:!0}));const[s,C]=z({list:c});$(()=>{const e=f();C("list",n=>n,A(n=>{n._checked=e===n[r]}))}),$(()=>{t.data&&(c=t.data.map(e=>typeof e=="object"?(e._show=!0,e):{[r]:e,label:e,_show:!0}),C("list",()=>[...c]),c.length&&d(!0))});const O=(e,n)=>{b(e),t.onChange&&t.onChange(e,n),d(!1)},k=()=>{const e=f();let n;return B(()=>{n=s.list.find(a=>a[r]===e)}),n?n[_]:t.emptyOption?t.emptyOption:""},x=e=>{e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),t.onChange&&t.onChange(""),b("")},y=e=>{e.target.value.length&&t.onSearch&&t.onSearch(e.target.value)},D=()=>!!(s.list&&s.list.length);return(()=>{const e=K(),n=m;return typeof n=="function"?E(n,e):m=e,h(e,l(I,{get transfer(){return t.transfer},align:w,get disabled(){return t.disabled},trigger:"click",visible:[u,d],onBeforeDrop:D,get menu(){return(()=>{const a=N();return h(a,l(q,{get open(){return u()},get children(){const i=M(),g=i.firstChild;return h(g,l(L,{get each(){return s.list},children:o=>l(G,{get renderOption(){return t.renderOption},get visible(){return o._show},get disabled(){return o.disabled},data:o,get checked(){return o._checked},valueField:r,textField:_,onClick:O})})),i}})),a})()},get children(){return l(H,{get text(){return k()},get disabled(){return t.disabled},filter:!0,onInput:y,get clearable(){return t.clearable},onClear:x,get placeholder(){return t.placeholder},get prepend(){return t.prefix},get size(){return t.size},get icon(){return l(j,{name:"chevron-down",class:"cm-select-cert"})}})}})),V(a=>{const i=F(),g=t.style;return a._v$=P(e,i,a._v$),a._v$2=R(e,g,a._v$2),a},{_v$:void 0,_v$2:void 0}),e})()}export{Z as A};
