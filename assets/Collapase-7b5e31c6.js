import{b as h,J as u,v as d,u as f,i as g,g as v,h as m,s as y,t as E,j as $}from"./index-00bf0c33.js";const L=E("<div>");function _(n){const l=()=>$(n,"cm-collapase");let t;function o(){const e=document.createElement("surface"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(let s in i)if(e.style[s]!==void 0)return i[s]}function a(){n.open&&t&&(t.style.height="auto"),n.onEnd&&n.onEnd(n.open)}return h(()=>{if(!t)return;if(n.open){t.style.height="auto";const i=t.getBoundingClientRect().height;n.onOpen&&n.onOpen(i),t.style.height="0px",t.classList.add("cm-collapase-open"),setTimeout(()=>{t.style.height=`${i}px`},0)}else{const i=t.getBoundingClientRect().height;t.classList.add("animation"),t.classList.remove("cm-collapase-open"),t.style.height=`${i}px`,setTimeout(()=>{t.style.height="0px"},0)}}),u(()=>{if(t){const e=o();t.addEventListener(e,a)}}),d(()=>{const e=o();t&&t.removeEventListener(e,a)}),n.ref&&n.ref({getHeight(){const e=t.style.height;t.style.transition="none",t.style.height="auto";const i=t.offsetHeight;return t.style.transition="",t.style.height=e,i}}),(()=>{const e=L(),i=t;return typeof i=="function"?f(i,e):t=e,g(e,()=>n.children),v(s=>{const c=l(),r=n.style;return s._v$=m(e,c,s._v$),s._v$2=y(e,r,s._v$2),s},{_v$:void 0,_v$2:void 0}),e})()}export{_ as C};
