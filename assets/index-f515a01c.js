import{i as m,a as f,I as v,g as y,n as I,t as o,h as M,s as z,j as S}from"./index-00bf0c33.js";import{I as k}from"./input-14b161dc.js";import{c as w}from"./createField-b596c149.js";const L=o("<div>"),P=o('<span class="cm-spinner-plus">'),D=o('<span class="cm-spinner-subs">');function j(e){const $=()=>S(e,"cm-spinner",{[`cm-spinner-${e.size}`]:e.size,"cm-spinner-disabled":e.disabled}),[u,c]=w(e,Math.max(0,e.min??0)),x=(n,t)=>{n=n.replace(/[^0-9\.]/g,""),t.target.value=n},C=n=>{n.keyCode===38&&h(),n.keyCode===40&&r()};let a=e.min||0,d=e.step||1;const _=n=>{let t=n;e.max!==void 0&&(t=Math.min(t,e.max)),a!==void 0&&(t=Math.max(t,a)),Promise.resolve().then(()=>{c(t)}),e.onChange&&e.onChange(t)},h=()=>{if(e.disabled)return;let n=g(u(),d);if(e.loop&&e.max!==void 0&&a!==void 0&&n>e.max){const t=n-e.max;n=a+t-1}e.max!==void 0&&(n=Math.min(e.max,n)),c(n),e.onChange&&e.onChange(n),e.onPlus&&e.onPlus(n,d)},r=()=>{if(e.disabled)return;let n=g(u(),-d);if(e.loop&&e.max!==void 0&&a!==void 0&&n<a){const t=n-a;n=e.max+t+1}a!==void 0&&(n=Math.max(a,n)),c(n),e.onChange&&e.onChange(n),e.onSub&&e.onSub(n,d)};function g(n,t){let i,l,s;try{i=n.toString().split(".")[1].length}catch{i=0}try{l=t.toString().split(".")[1].length}catch{l=0}return s=Math.pow(10,Math.max(i,l)),(n*s+t*s)/s}return(()=>{const n=L();return m(n,f(k,{get size(){return e.size},get placeholder(){return e.placeholder},get disabled(){return e.disabled},onInput:x,notCreateFiled:!0,value:[u,c],onChange:_,onKeyDown:C,get append(){return[(()=>{const t=P();return t.$$click=h,m(t,f(v,{name:"chevron-up",size:12})),t})(),(()=>{const t=D();return t.$$click=r,m(t,f(v,{name:"chevron-down",size:12})),t})()]}})),y(t=>{const i=$(),l=e.style;return t._v$=M(n,i,t._v$),t._v$2=z(n,l,t._v$2),t},{_v$:void 0,_v$2:void 0}),n})()}I(["click"]);export{j as S};
